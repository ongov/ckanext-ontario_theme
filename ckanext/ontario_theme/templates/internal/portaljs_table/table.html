{# templates/internal/portaljs_table/table.html #}
{% extends "page.html" %}

{# Main content area #}
{% block primary %}
  <h1 class="page-heading">PortalJS Table</h1>

  {# React mount node â€” csv_url can be passed via query string or view/controller #}
  <div id="portaljs-table-root"
       data-csv-url="{{ csv_url }}">
  </div>
{% endblock primary %}

{# assets JS bundle (the React build output) #}
{# test url: http://localhost:5000/portaljs/table?csv_url=http://localhost:5000/dataset/bad-int-reset/resource/2a0b80ad-7a0a-4155-b3ed-e1401d49ca4a/download/good_int.csv #}
{# or just http://localhost:5000/portaljs/table #}
{% block scripts %}
  {{ super() }}
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script type="module">
    import { FlatUiTable } from "https://esm.sh/@portaljs/components@0.1.3";
    const mountNode = document.getElementById('portaljs-table-root');
    const csvUrl = mountNode.getAttribute('data-csv-url');
    import ReactDOM from "https://esm.sh/react-dom@18";
    import React from "https://esm.sh/react@18";
    ReactDOM.createRoot(mountNode).render(React.createElement(FlatUiTable, { url: csvUrl }));
  </script>
{% endblock %}


